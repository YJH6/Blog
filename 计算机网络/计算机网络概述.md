# 计算机网络

## 第一章 计算机网络概述

互联网之所以能够向用户提供许多服务，就是因为互联网具有两个重要基本特点，即连通性（connectivity）和共享

**连通性**(connectivity)，就是互联网使上网用户之间，不管相距多远（例如，相距数 千公里），都可以非常便捷、非常经济（在很多情况下甚至是免费的）地交换各种信息（数据，以及各种音频视频）

互联网具有**虚拟**的特点。例如，当你从互联网上收到一封电子邮件时，你可能无法准确知道对方是谁（朋友还是骗子)，也无法知道发信人的地点（在附近，还是在地球对面）

共享就是指**资源共享**。资源共享的含义是多方面的。可以是信息共享、软件共享，也可以是硬件共享

“互联网+”的意思就是“互联网+各个传统行业”，因此可以利用信息通信技术和互联网平台来创造新的发展生态。实际上“互联网+” 代表一种新的经济形态，其特点就是把互联网的创新成果深度融合于经济社会各领域之中， 这就大大地提升了实体经济的创新力和生产力

* ***网络的网络***

  计算机**网络**是由若干节点和连接这些节点的链路组成，与网络相连的计算机称为**主机**，所以网络也就是把主机连接起来。网络之间通过路由器互联起来，就构成一个覆盖范围更大的计算机网路，所以互联网的**互联**的意思就是由网络构成的互联网（网络的网络）

* ***ISP互联网服务提供者***

  ISP从互联网管理机构申请到很多IP地址 （互联网上的主机必须有IP地址才能上网)，同时拥有通信线路（大 ISP自己建造通信线路，小ISP则向电信公司租用通信线路）以及路由器等连网设备，因此任何机构和个人只要向某个ISP交纳规定的费用，就可从该ISP获取所需IP地址的使用权，并可通过该ISP接入到互联网。所谓 “**上网**”就是指“（通过某ISP获得的IP地址）接入到互联网”

* ***IXP产生互联网交换点***

  根据提供服务的覆盖面积大小以及所拥有的IP地址数目的不同，ISP也分为不同层次
  的ISP:主干ISP、地区ISP和本地ISP
  随着互联网上数据流量的急剧增长，开始研究如何更快地转发分组，以及如何更加有效地利用网络资源。产生互联网交换点IXP(Internet exchange Point)
  **IXP**的主要作用就是允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组

* ***互联网的组成***

  网络中各个节点相互连接的方法和形式称为**网络拓扑结构**（所谓“拓扑”就是把实体抽象成与其大小、形状无关的“点”，而把连接实体的线路抽象成“线”，进而以图的形式来表示这些点与线之间关系的方法，其目的在于研究这些点、线之间的相连关系。表示点和线之间关系的图被称为拓扑结构图）

  从其工作方式上看，可以划分为以下两大块
  **边缘部分**由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。
  **核心部分**由**大量网络和连接这些网络的路由器组成**。这部分是为边缘部分提供服务的（提供连通性和交换）（路由器很重要，路由器之间由高速链路组成）

  * 互联网的边缘部分

    主机A 的某个进程和主机B 上的另一个进程进行通信,称为**计算机通信**
    网络边缘的端系统之间的通信方式通常可划分为两大类：客户-服务器方式（C /S方式）和对等方式（P2P方式）

    * 客户-服务器方式
      计算机通信的对象是应用层中的应用进程
      客户是服务请求方，服务器是服务提供方（服务请求方和服务提供方都要使用网络核心部分所提供的服务）
      C/S程序特点
      客户程序：
      (1) 被用户调用后运行，在通信时**主动向远地服务器发起通信**（请求服务）。因此，客户程序必须知道服务器程序的地址。
      (2) 不需要特殊的硬件和很复杂的操作系统。
      服务器程序：
      (1) 是一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求。
      (2) 系统启动后即自动调用并一直不断地运行着，被动地等待并接受来自各地的客户的通信请求。因此，**服务器程序不需要知道客户程序的地址**。
      (3) 一般需要有强大的硬件和高级的操作系统支持
      客户和服务器本来都指的是计算机进程（软件)，表示机器时称客户端或服务器端
    * 对等连接方式
      是指两台主机在通信时并不区分哪一个是服务请求方哪一个是服务提供方。只要两台主机都运行了对等连接软件（P2P软件），它们就可以进行平等的、对等连接通信。实际上，对等连接方式从本质上看仍然是使用客户-服务器方式，只是对等连接中的每一台主机既是客户又同时是服务器

  * 互联网的核心部分

    网络核心部分是互联网中最复杂的部分，因为网络中的核心部分要**向网络边缘中的大量主机提供连通性**，使边缘部分中的任何一台主机都能够向其他主机通信。
    在网络核心部分起特殊作用的是路由器,它是一种专用计算机（但不叫做主机)。路由器是实现**分组交换**的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能

* ***电路交换与分组交换***

  交换的意思是按照某种方式动态地分配传输线路的资源

  * 电路交换

    在使用电路交换通话之前，必须先拨号请求建立连接。当被叫用户听到交换机送来的振铃音并摘机后，从主叫端到被叫端就建立了一条连接，也就是一条专用的物理通路，通话完毕挂机后，交换机释放刚才使用的这条专用的物理通路（即把刚才占用的所有通信资源归还给电信网）
    必须经过“**建立连接**（占用通信资源） **通话** （一直占用通信资源）-**释放连接**（归还通信资源）”三个步骤的交换方式称为电路交换
    电路交换的一个重要特点就是在通话的全部时间内，**通话的两个用户始终占用端到端的通信资源**
    使用电路交换来传送计算机数据时，其线路的传输效率往往很低（计算机数据是突发式的出现在线路上），用户占用的通信线路资源在绝大部分时间里都是空闲的（浏览网站，输入时...），常常通信线路资源并未被利用而是白白被浪费，对线路的利用率很低，往往不到 10%。

  * 分组交换

    分组交换则采用存储转发技术,通常把要发送的整块数据称为一个报文(message)。在发送报文之前，先把较长的 报文划分成为一个个更小的等长数据段，在每一个数据段前面，加上一些由必要的控制信息组成的首部(header)（也称包头）后，就构成了一个分组(packet)（包）

    分组中的 “首部”是非常重要的，正是由于分组的首部包含了诸如目的地址和源地址等重要控制信息，每一个分组才能在互联网中独立地选择传输路径，并被正确地交付到分组传输的终点

    网络边缘的主机和位于网络核心部分的路由器都是计算机，主机是为用户进行信息处理的，并且可以和其他主机通过网络交换信息。路由器则是用来转发分组的，即进行分组交换的。路由器收到分组，暂时存储，检查首部，按照信息配对地址，转发。各路由器之间必须经常交换彼此掌握的路由信息，以便创建和动态维护路由器中的转发表，使得转发表能够在整个网络拓扑发生变化时及时更新

    分组在各路由器存储转发时需要排队，这就会造成一定的**时延**（需要减少时延），由于分组交换不像电路交换那样通过建立连接来保证通信时所需的各种资源，因而无法确保通信时端到端所需的带宽

* ***计算机网络类别***
  计算机网络主要是由一些通用的、 可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用
  * 按照网络的作用范围进行分类
    城域网MAN(Wide Area Network)
    广域网WAN(Metropolitan Area Network)
    局域网LAN(Local Area Network)
    个人区域网PAN (Personal Area Network)
  * 按照网络的使用者进行分类
    公用网(public network)
    专用网(private network)
  * 用来把用户接入到互联网的网络
    接入网AN (Access Network),它又称为本地接入网或居民接入网。这是一类比较特殊的计算机网络接入网本身既不属于互联网的核心部分，也不属于互联网的边缘部分。从作用上看，接入网只是起到让用户能够与互联网连接的“桥梁”作用（电话拨号，宽带）

* ***计算机性能***

  * 1 .速率

    指数据的传送速率，也称为数据率(data rate) 或比特率(bit rate)单位是bit/s
    计算机发送出的信号都是数字形式的。比特(bit)来源于binary digit，意思是 一 个 “二进制数字”
    当数据率较高时，就常常在bit/s的前面加上一个字母。例如，k (kilo) = 103 = 千 ，M (Mega) = 106 = 兆 ，G (Giga) = 109 = 吉，T (Tera)=1012= 太 ，P (Peta) = 1015 = 拍 ，E (Exa) = 1018= 艾
    一般提到网络的速率时，往往指的是额定速率或标称速率，而并非网络实际上运行的速率

  * 2 . 带宽

    带宽有两种含义
    (1)带宽本来是指某个信号具有的频带宽度。信号的带宽是指该信号所包含的各种不同频率成分所占据的频率范围
    (2)在计算机网络中，带宽用来表示网络中某通道传送数据的能力，因此网络带宽表示在单位时间内网络中的某信道所能通过的“**最高数据率**”。这种意义的带宽的单位就是数据率的单位bit/s，是 “比特每秒”。
    在 “带宽”的上述两种表述中，前者为频域称谓，而后者为时域称谓，其本质是相同的。也就是说，一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高

  * 3.吞吐量

    吞吐量(throughput)表示在单位时间内通过某个网络（或信道、接口）的**实际的数据量**。吞吐量受网络的带宽或网络的额定速率的限制

  * 4 . 时延

    时延(delay或 latency)是指数据（一个报文或分组，甚至比特）从 网 络 （或链路）的一 端传送到另一端所需的时间

    * (1 )发送时延

      发送时延(transmission delay)是主机或路由器发送数据帧所需要的时 间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间（发生在机器的内部，一般在网络适配器）
      发送时延 = 数据巾贞长度（bit) / 发送速率（bit/s)

    * 2 )传播时延

      传播时延(propagation delay)是电磁波在信道中传播一定的距离需要花 费的时间
      传播时延 = 信道长度(m) / 电磁波在信道上的传播速率(m/s)
      传播时延发生在机器外部的传输信道媒体上，而与信号的发送速率无关。信号传送的距离越远，传播时延就越大

    * 3) 处理时延

      主机或路由器在收到分组时要花费一定的时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由等，这就产生了处理时延。

    * (4) 排队时延

      分组在经过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。这就产生了排队时延。排队时延的长短往往取决于网络当时的通信量。当网络的通信量很大时会发生队列溢出，使分组丢失，这相当于排队时延为无穷大

    总时延= 发送时延+ 传播时延+ 处理时延+ 排队时延
    那个时延占据优势，还要具体分析

  * 5 .时延带宽积

    网络性能的两个度量—— 传播时延和带宽—— 相乘，就得到另一个很有用的度量：传播时延带宽积
    时延带宽积 = 传播时延 x 带宽
    链路的时延带宽积又称为以比特为单位的链路长度

  * 6 .往返时间RTT

    往返时间RTT (Round-Trip Time)也是一个重要的性能指标。这是因为 在许多情况下，互联网上的信息不仅仅单方向传输而是双向交互的。因此，我们有时很需要知道双向交互一次所需的时间
    发送时间 = 数据长度 / 发送速率
    有效数据率 = 数据长度 / 发送时间+RTT
    往返时间还包括各中间结点的处理时延、排队时延以及转发数据时的发送时延。当使用卫星通信时，往返时间RTT相对较长是一个很重要的性能指标

  * 7 .利用率

    信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）。完全空闲的信道的利用率是零。网络利用率则是全网络的信道利
    用率的加权平均值。信道利用率并非越高越好。这是因为，根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加（会增加排队）
    如果令D0表示网络空闲时的时延，D表示网络当前的时延，那么在适当的假定条件下，可以用下面的简单公式来表示D，D0和利用率U之间的关系：D = D0 / 1-U
    **信道或网络的利用率过高会产生非常大的时延**

* ![img](https://github.com/YJH6/Blog/blob/master/计算机网络/1.png)

  * **应用层(application layer)**

    应用层的任务是**通过应用进程间的交互来完成特定网络应用**。应用层协议定义的是**应用进程间通信和交互的规则**。这里的进程就是指主机中**正在运行的程序**。对于不同的网络应用需要有不同的应用层协议。我们把应用层交互的数据单元称为**报文**(message)
    在互联网中的应用层协议很多，如域名系统DNS,支持万维网应用的HTTP协议，支持电子邮件的SMTP协议，等等。

  * **运输层(transport layer)**

    负责向**两台主机中进程之间的通信提供通用的数据传输服务**，应用进程利用该服务传送应用层报文。所谓“通用的”，是指并不针对某个特定网络应用，而是多种应用可以使用同一个运输层服务。由于一台主机可同时运行多个进程，因此运输层有复用和分用的功能。**复用**就是多个应用层进程可同时使用下面运输层的服务，**分用**和复用相反，是运输层把收到的信息分别交付上面应用层中的相应进程。
    运输层主要使用以下两种协议：
    • **传输控制协议TCP** (Transmission Control Protocol)——提供面向连接的、可靠的数据传输服务，其数据传输的单位是**报文段**(segment)。
    • **用户数据报协议UDP** (User Datagram Protocol)—–提供无连接的、尽最大努力(best-effort)的数据传输服务（不保证数据传输的可靠性），其数据传输的单位是**用户数据报**。

  * **网络层(network layer)**

    网络层负责为分组交换网上的**不同主机提供通信服务**。在发送数据时，网络层把运输层产生的报文段或用户数据报**封装**成**分组**或**包**进行传送。在 TCP/IP体系中，由于网络层使IP协议，所以分组也叫做**IP数据报**
    网络层的另一个任务是选择合适的路由，使源主机运输层传下来的分组能够通过网络中的路由器找到目的主机
    互联网是由大量的**异构网络**通过路由器相互连接起来的，互联网的网络层使用的是无连接的网际协议IP和许多种路由选择协议

  * **数据链路层**

    简称链路层，两台主机之间的数据传输，总是在一段链路上传送，这就需要专门的链路层协议。在两个相邻结点之间传送数据时，数据链路层将网络层交下来的IP数据报组装成帧，帧在两个结点之间传送。每一个帧包括数据和必要的控制信息（同步信息、地址信息、差错控制等）
    接收数据时，控制信息能够知道一个帧从哪个比特开始和哪个比特结束。这样数据链路层在收到一个帧后，就可以从中提取出数据部分，上交给网络层。
    控制信息还使接收端能够检测到所收到的帧中有误差错。有就丢弃。如果需要还可改正数据在传输时出现的差错

  * **物理层**

    物理层上所传的数据单位是**比特**。

  * **表示层** 

    数据压缩、加密以及数据描述，这使得应用程序不必关心在各台主机中数据内部格式不同的问题。

  * **会话层** 

    建立及管理会话

  ***TCP/TP体系结构的另一种表示方法***

  ​	![img](https://github.com/YJH6/Blog/blob/master/计算机网络/2.png)

  TCP/IP协议可以**为格式各样的应用提供服务**。也允许**在各式各样的网络构成的互联网上运行**